import{w as j}from"./with-props-Djoh9EVt.js";import{v as b,a as o,o as e,s as x}from"./chunk-AYJ5UCUI-6a0CsxBx.js";import{a as N}from"./api-B-7papqt.js";import{D as C}from"./DefaultLayout-w4AkJxnC.js";import{L as y}from"./Loading-BKoXs-71.js";import{S as w}from"./Sidebar-DKz6v4Vh.js";import{f as L}from"./formatDate-BqoJENqE.js";function D({}){return[{title:"Mammon's Blog | Categories"},{name:"description",content:"Security Researcher and Enthusiast. Iâ€™m fairly low profile, but share useful info from time to time. Red Team wannabe"}]}const v=()=>{const{hash:i}=b(),[r,d]=o.useState(""),[l,c]=o.useState([]),[m,n]=o.useState(!0),f=o.useRef(null);o.useEffect(()=>{const s=i.slice(1).toLowerCase().replace(/\s+/g,"-");d(s)},[i]),o.useEffect(()=>(N.get("/post").then(({data:s})=>{c(s.data.posts.reverse()),n(!1)}).catch(s=>{console.error("Error fetching posts:",s),n(!1)}),()=>{c([]),n(!0)}),[]);const h=o.useMemo(()=>{const s=l.flatMap(({category:a})=>a).map(a=>a.toLowerCase().replace(/\s+/g,"-")),t={};for(const a of s)t[a]=(t[a]||0)+1;return Object.entries(t).sort((a,g)=>g[1]-a[1])},[l]),p=o.useMemo(()=>!r||l.length===0?[]:l.filter(s=>{var t;return(t=s.category)==null?void 0:t.map(a=>a.toLowerCase().replace(/\s+/g,"-")).includes(r)}),[r,l]),u=s=>{const t=document.getElementById(s);t&&t.scrollIntoView({behavior:"smooth"})};return e.jsx(C,{children:e.jsxs("div",{className:"flex",children:[e.jsx(w,{}),m?e.jsx("div",{className:"mt-[22px] w-3/4 ml-[50px] mb-[50px] flex flex-col gap-2 pr-[200px]",children:e.jsx("h1",{className:"page-title text-[26px] font-bold",children:"Loading..."})}):e.jsxs("div",{className:"mt-[22px] w-3/4 ml-[50px] mb-[50px] pr-[200px]",children:[e.jsx("h2",{className:"page-title text-[26px] font-bold mb-[30px] underline",children:"Categories"}),e.jsx("ul",{className:"space-y-2 grid grid-cols-3 gap-x-[50px] gap-y-[10px] !list-none ml-[-48px]",children:h.map(([s,t])=>e.jsx("li",{className:"pb-1",onClick:()=>u(s),children:e.jsxs(x,{to:`/categories/#${s}`,className:"flex justify-between border-b-[1px] border-[#51555d]",children:[e.jsx("span",{className:"font-bold",children:s}),e.jsx("span",{className:"font-bold",children:t})]})},s))}),m?e.jsx(y,{lines:3}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{id:r,ref:f,className:"page-title text-[26px] font-bold mb-[30px] mt-[80px] underline",children:r.toUpperCase()}),e.jsx("ul",{className:"mt-8 ml-8 flex flex-col gap-4 !list-none !pl-[32px]",children:p.length>0?p.map(s=>e.jsx("li",{className:"text-[18px] mb-2",children:e.jsxs(x,{to:`/post/${s._id}`,className:"flex flex-col gap-2",children:[e.jsx("h2",{className:"text-[#699da0] underline hover:text-[#4a7b8c] text-[26px] font-bold",children:s.title}),e.jsxs("div",{className:"text-[13px] flex items-center gap-1 opacity-70",children:[e.jsx("i",{className:"fa-solid fa-calendar-days"}),e.jsx("span",{children:L(s.createdAt)})]}),e.jsx("div",{className:"line-clamp-2 text-[16px]",dangerouslySetInnerHTML:{__html:s.content}})]})},s._id)):e.jsx("p",{children:"No posts found for this category."})})]})]})]})})},P=j(v);export{P as default,D as meta};
