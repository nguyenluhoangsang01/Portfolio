import{w as j}from"./with-props-Djoh9EVt.js";import{t as T,a as s,o as t}from"./chunk-AYJ5UCUI-6a0CsxBx.js";import{a as g}from"./api-B-7papqt.js";import{D as w}from"./DefaultLayout-w4AkJxnC.js";import{T as x,R as S}from"./TagInput-KPL0b6lr.js";function D({}){return[{title:"Mammon's Blog | Update post"},{name:"description",content:"Security Researcher and Enthusiast. I’m fairly low profile, but share useful info from time to time. Red Team wannabe"}]}const E=()=>{const{id:a}=T(),[r,u]=s.useState(""),[n,d]=s.useState(""),[l,m]=s.useState([]),[i,p]=s.useState([]),[f,h]=s.useState(!0),[c,o]=s.useState(null);s.useEffect(()=>{g.get(`/post/${a}`).then(({data:e})=>{u(e.data.post.title),d(e.data.post.content),m(e.data.post.tag),p(e.data.post.category)}).catch(e=>{console.error("Error fetching posts:",e)}).finally(()=>{h(!1)})},[]);const b=async e=>{e.preventDefault();try{await g.patch(`/post/${a}`,{title:r,content:n,tag:l,category:i}),console.log({title:r,content:n,tag:l,category:i}),o({text:"✅ Post updated successfully!",isError:!1}),scrollTo(0,0),setTimeout(()=>o(null),3e3)}catch(y){console.error(y),o({text:"❌ Failed to update post.",isError:!0}),setTimeout(()=>o(null),3e3)}};return t.jsx(w,{children:f?t.jsx("h1",{className:"page-title text-[26px] font-bold",children:"Loading..."}):t.jsxs("form",{onSubmit:b,className:"space-y-6 p-6 bg-gray-800 text-white rounded-lg shadow-lg max-w-6xl mx-auto",children:[c&&t.jsx("div",{className:`p-2 rounded text-sm font-medium text-white ${c.isError?"bg-red-600":"bg-green-600"}`,children:c.text}),t.jsxs("h2",{className:"text-2xl font-bold",children:["Update post - ID: ",a]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-1 font-semibold",children:"Title"}),t.jsx("input",{name:"title",value:r,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 border border-gray-600 rounded bg-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Post title",required:!0})]}),t.jsxs("div",{className:"flex gap-10",children:[t.jsx(x,{label:"Tag",tag:l,setTag:m}),t.jsx(x,{label:"Category",tag:i,setTag:p})]}),t.jsx(S,{content:n,setContent:d}),t.jsx("button",{type:"submit",className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded transition duration-200",children:"Submit"})]})})},U=j(E);export{U as default,D as meta};
